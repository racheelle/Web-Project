<%- include("../includes/head") %>
<link rel="stylesheet" href="/css/admin.css">

<div class="admin-container">

  <aside class="admin-sidebar">
    <h2>Zahle Admin</h2>
    <a href="/admin">Dashboard</a>
    
    <a href="/admin/messages">Messages</a>
    <a href="/admin/places">Manage Places</a>
          <a href="/admin/places/add">Add Place</a>
          <a href="/admin/admins" class="active">Manage Admins</a>
    <a href="/" class="back-home">Back to Homepage</a>
    <a href="/logout">Logout</a>
  </aside>

  <main class="admin-main">
    <div class="admin-header">
  <h1>Admins</h1>
  <a href="/admin/admins/add" class="btn-primary add-admin-btn">+ Add New Admin</a>
</div>


    

    <table class="admin-table">
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Username</th>
        <th>Actions</th>
      </tr>

      <% admins.forEach(a => { %>
        <tr>
          <td><%= a.id %></td>
          <td><%= a.name %></td>
          <td><%= a.email %></td>
          <td><%= a.username %></td>

          <td class="action-buttons">
            <a class="btn-edit" href="/admin/admins/edit/<%= a.id %>">Edit</a>

            <% if (a.id !== user.id) { %>
             <button class="btn-delete delete-admin-btn" data-id="<%= a.id %>" data-name="<%= a.name %>">Delete</button>
              </form>
            <% } else { %>
              <span class="cannot-delete">You</span>
            <% } %>
          </td>
        </tr>
      <% }) %>
    </table>

  </main>

</div>


<!-- DELETE ADMIN CONFIRMATION MODAL -->
<div id="deleteAdminModal" class="modal">
  <div class="modal-content">
    <h3>Delete Admin</h3>
    <p id="deleteAdminText">Are you sure you want to delete this admin?</p>

    <form id="deleteAdminForm" method="POST">
      <button class="yes">Yes, Delete</button>
    </form>

    <button id="cancelDeleteAdmin" class="no">Cancel</button>
  </div>
</div>

<script src="/js/deleteAdmin.js"></script>
